<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<title>{% block pagetitle %}QuantInvest{% endblock pagetitle%}</title>

	<link rel="stylesheet" href="{{relpath}}/static/qualinv.css" />
	{% block jsdata %}{% endblock jsdata %}
</head>
<body class="container-fluid" style="padding-top: 15px;">
	<nav class="navbar navbar-expand-lg navbar-light bg-light">
		<div class="container-fluid">
			<div class="navbar-header">
				<a class="navbar-brand" href="{{relpath}}/">QuantInvest</a>
				<a class="navbar-brand" href="{{relpath}}/transactions">Transactions</a>
				<a class="navbar-brand" href="{{relpath}}/position">Position</a>
				<a class="navbar-brand" href="{{relpath}}/asset">Asset Analyzer</a>
				<a class="navbar-brand" href="{{relpath}}/assets">Assets</a>
			</div>

			<div class="nav navbar-nav navbar-right">
				{% if not user.userid %}
					<a href="{{relpath}}/login?redir={{relpath}}/">Login</a>
				{% else %}
					<div class="dropdown">
						<button onclick="logout_menu()" class="dropbtn">Welcome, {{user.display}}!</button>
						<div id="logout_menu" class="dropdown-content">
							<a href="{{relpath}}/logout?redir={{relpath}}/">Logout</a>
						</div>
					</div>
				{% endif %}
			</div>
		</div>
	</nav>

	{% block alert %}{% if alert_msg %}<div class="alert alert-{{alert_type}}">{{alert_msg}}</div>{% endif %}{% endblock alert %}
	{% block content %}{% endblock content %}
	{% block auth %}{% endblock auth %}
</body>
</html>
<script>
/* When the user clicks on the button, 
toggle between hiding and showing the dropdown content */
function logout_menu() {
  document.getElementById("logout_menu").classList.toggle("show");
}
// Close the dropdown if the user clicks outside of it
window.onclick = function(event) {
  if (!event.target.matches('.dropbtn')) {
    var dropdowns = document.getElementsByClassName("dropdown-content");
    var i;
    for (i = 0; i < dropdowns.length; i++) {
      var openDropdown = dropdowns[i];
      if (openDropdown.classList.contains('show')) {
        openDropdown.classList.remove('show');
      }
    }
  }
}
</script>